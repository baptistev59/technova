{% extends 'base.html.twig' %}

{% block title 'Mes commandes — TechNova' %}

{% block body %}
<section class="tn-section max-w-4xl mx-auto space-y-6">
    <div>
        <p class="text-xs uppercase tracking-[0.35em] text-slate-400">TechNova</p>
        <h1 class="text-3xl font-bold">Mes commandes</h1>
    </div>

    {% if orders is empty %}
        <div class="rounded-[32px] border border-slate-200 bg-white/70 backdrop-blur p-10 text-center text-slate-600">
            Tu n’as pas encore passé de commande. Parcours notre <a href="{{ path('catalog_index') }}" class="text-blue-600 underline">catalogue</a> pour découvrir les nouveautés.
        </div>
    {% else %}
        <div class="space-y-5">
            {% for order in orders %}
                <article class="rounded-[32px] border border-slate-200 bg-white/80 backdrop-blur p-6 shadow-[0_35px_80px_rgba(15,25,36,0.08)]">
                    <div class="flex flex-wrap items-center justify-between gap-4">
                        <div>
                            <p class="text-xs uppercase tracking-[0.25em] text-slate-400">Référence</p>
                            <p class="text-xl font-semibold text-slate-900">{{ order.reference }}</p>
                            <p class="text-sm text-slate-500 mt-1">Passée le {{ order.createdAt|date('d/m/Y à H\\hi') }}</p>
                        </div>
                        <div class="text-right">
                            <p class="text-xs text-slate-500">Statut</p>
                            <p class="text-lg font-semibold text-slate-900">{{ order.status|capitalize }}</p>
                        </div>
                    </div>
                    <div class="mt-4 flex flex-wrap items-center justify-between gap-4 border-t border-slate-100 pt-4">
                        <div class="text-sm text-slate-500">
                            {{ order.items|length }} article{{ order.items|length > 1 ? 's' }}
                        </div>
                        <div class="flex items-center gap-4">
                            <p class="text-2xl font-semibold text-slate-900">{{ order.totalAmount|number_format(2, ',', ' ') }} €</p>
                            <a class="btn btn-outline" href="{{ path('app_account_orders_show', {reference: order.reference}) }}">Détails</a>
                        </div>
                    </div>
                </article>
            {% endfor %}
        </div>
    {% endif %}
</section>
{% endblock %}
